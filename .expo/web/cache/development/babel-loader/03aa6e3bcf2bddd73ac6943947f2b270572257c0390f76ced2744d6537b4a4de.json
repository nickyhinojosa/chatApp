{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, createContext, useContext, useEffect } from 'react';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { auth } from \"./config/firebase\";\nimport Login from \"./screens/Login\";\nimport Signup from \"./screens/Signup\";\nimport Chat from \"./screens/Chat\";\nimport Home from \"./screens/Home\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createStackNavigator();\nvar AuthenticatedUserContext = createContext({});\nvar AuthenticatedUserProvider = function AuthenticatedUserProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  return _jsx(AuthenticatedUserContext.Provider, {\n    value: {\n      user: user,\n      setUser: setUser\n    },\n    children: children\n  });\n};\nfunction ChatStack() {\n  return _jsxs(Stack.Navigator, {\n    defaultScreenOptions: Home,\n    children: [_jsx(Stack.Screen, {\n      name: \"Home\",\n      component: Home\n    }), _jsx(Stack.Screen, {\n      name: \"Chat\",\n      component: Chat\n    })]\n  });\n}\nfunction AuthStack() {\n  return _jsxs(Stack.Navigator, {\n    screenOptions: {\n      headerShown: false\n    },\n    children: [_jsx(Stack.Screen, {\n      name: \"Login\",\n      component: Login\n    }), _jsx(Stack.Screen, {\n      name: \"Signup\",\n      component: Signup\n    })]\n  });\n}\nfunction RootNavigator() {\n  var _useContext = useContext(AuthenticatedUserContext),\n    user = _useContext.user,\n    setUser = _useContext.setUser;\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  useEffect(function () {\n    var unsubscribeAuth = onAuthStateChanged(auth, function () {\n      var _ref2 = _asyncToGenerator(function* (authenticatedUser) {\n        authenticatedUser ? setUser(authenticatedUser) : setUser(null);\n        setIsLoading(false);\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    return unsubscribeAuth;\n  }, [user]);\n  if (isLoading) {\n    return _jsx(View, {\n      style: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: _jsx(ActivityIndicator, {\n        size: \"large\"\n      })\n    });\n  }\n  return _jsx(NavigationContainer, {\n    children: user ? _jsx(ChatStack, {}) : _jsx(AuthStack, {})\n  });\n}\nexport default function App() {\n  return _jsx(AuthenticatedUserProvider, {\n    children: _jsx(RootNavigator, {})\n  });\n}","map":{"version":3,"names":["React","useState","createContext","useContext","useEffect","NavigationContainer","createStackNavigator","View","ActivityIndicator","onAuthStateChanged","auth","Login","Signup","Chat","Home","jsx","_jsx","jsxs","_jsxs","Stack","AuthenticatedUserContext","AuthenticatedUserProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","Provider","value","ChatStack","Navigator","defaultScreenOptions","Screen","name","component","AuthStack","screenOptions","headerShown","RootNavigator","_useContext","_useState3","_useState4","isLoading","setIsLoading","unsubscribeAuth","_ref2","_asyncToGenerator","authenticatedUser","_x","apply","arguments","style","flex","justifyContent","alignItems","size","App"],"sources":["C:/Users/nicky/Desktop/Aplicaciones MÃ³viles I/ChatApp/App.js"],"sourcesContent":["import React, { useState, createContext, useContext, useEffect } from 'react';\r\nimport { NavigationContainer } from '@react-navigation/native';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport { View, ActivityIndicator } from 'react-native';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from './config/firebase';\r\nimport Login from './screens/Login';\r\nimport Signup from './screens/Signup';\r\nimport Chat from './screens/Chat';\r\nimport Home from './screens/Home';\r\n\r\nconst Stack = createStackNavigator();\r\nconst AuthenticatedUserContext = createContext({});\r\n\r\nconst AuthenticatedUserProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\nreturn (\r\n    <AuthenticatedUserContext.Provider value={{ user, setUser }}>\r\n      {children}\r\n    </AuthenticatedUserContext.Provider>\r\n  );\r\n};\r\n\r\nfunction ChatStack() {\r\n  return (\r\n    <Stack.Navigator defaultScreenOptions={Home}>\r\n      <Stack.Screen name='Home' component={Home} />\r\n      <Stack.Screen name='Chat' component={Chat} />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n\r\nfunction AuthStack() {\r\n  return (\r\n    <Stack.Navigator screenOptions={{ headerShown: false }}>\r\n      <Stack.Screen name='Login' component={Login} />\r\n      <Stack.Screen name='Signup' component={Signup} />\r\n    </Stack.Navigator>\r\n  );\r\n}\r\n\r\nfunction RootNavigator() {\r\n  const { user, setUser } = useContext(AuthenticatedUserContext);\r\n  const [isLoading, setIsLoading] = useState(true);\r\nuseEffect(() => {\r\n    // onAuthStateChanged returns an unsubscriber\r\n    const unsubscribeAuth = onAuthStateChanged(\r\n      auth,\r\n      async authenticatedUser => {\r\n        authenticatedUser ? setUser(authenticatedUser) : setUser(null);\r\n        setIsLoading(false);\r\n      }\r\n    );\r\n// unsubscribe auth listener on unmount\r\n    return unsubscribeAuth;\r\n  }, [user]);\r\nif (isLoading) {\r\n    return (\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator size='large' />\r\n      </View>\r\n    );\r\n  }\r\n\r\nreturn (\r\n    <NavigationContainer>\r\n      {user ? <ChatStack /> : <AuthStack />}\r\n    </NavigationContainer>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  return (\r\n    <AuthenticatedUserProvider>\r\n      <RootNavigator />\r\n    </AuthenticatedUserProvider>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}